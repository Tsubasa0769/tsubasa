(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{458:function(t,i,a){},495:function(t,i,a){"use strict";a(458)},517:function(t,i,a){"use strict";a.r(i);var s=a(134),e=(a(96),a(228),{name:"Canvas1",data:function(){return this.canvas=null,this.ctx=null,this.interval=1,this.minRadius=50,this.radius=50,this.rotate=0,this.imgEle=null,this.timer=null,this.ACCEPT=["image/png","image/jpg","image/jpeg"],{}},mounted:function(){this.canvas=this.$refs.canvas,this.ctx=this.canvas.getContext("2d"),this.imgEle=new Image,this.imgEle.addEventListener("load",this.init)},beforeDestroy:function(){this.imgEle.removeEventListener("load",this.init),clearInterval(this.timer),this.timer=null},methods:{onChange:function(t){this.timer&&clearInterval(this.timer);var i=Object(s.a)(t.target.files,1)[0],a=i.type;this.fileSize=i.size,this.ACCEPT.indexOf(a)<0&&this.$message.error("不支持上传".concat(a,"类型文件")),this.convertImageToBase64(i)},convertImageToBase64:function(t){var i=this,a=new FileReader;a.addEventListener("load",(function(t){var s=t.target.result;i.imgEle.src=s,a=null})),a.readAsDataURL(t)},init:function(){var t=this;this.imgEle.naturalWidth<200||this.imgEle.naturalHeight<200?this.$message.error("图片大小不能小于200*200"):(this.calcCanvas(),this.timer=setInterval((function(){t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.draw(7,10,t.rotate),t.rotate=(t.rotate+1)%360,(t.radius>t.canvas.height/2||t.radius<t.minRadius)&&(t.interval*=-1),t.radius+=t.interval}),16))},calcCanvas:function(){var t=this.$refs.canvasView.offsetWidth,i=t,a=!1,s=this.imgEle.naturalWidth,e=this.imgEle.naturalHeight;t<s&&(a=!0,i=e/(s/t)),i<e&&!a&&(a=!0,t=s/(e/i)),a||(t=s,i=e),this.canvas.width=t,this.canvas.height=i},draw:function(t,i,a){a=a||0;for(var s=(360-i*t)/t,e=-90-s/2,n=s/2-90,h=0;h<t;h++){var r=Math.PI/180*(e+(s+i)*h+a),c=Math.PI/180*(n+(s+i)*h+a);this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(this.canvas.width/2,this.canvas.height/2,this.radius,r,c),this.ctx.arc(this.canvas.width/2,this.canvas.height/2,this.minRadius,c,r,!0),this.ctx.closePath(),this.ctx.stroke(),this.ctx.clip(),this.ctx.drawImage(this.imgEle,0,0,this.canvas.width,this.canvas.height),this.ctx.restore()}}}}),n=(a(495),a(40)),h=Object(n.a)(e,(function(){var t=this.$createElement,i=this._self._c||t;return i("div",{ref:"canvasView",staticClass:"canvas1-view"},[this._v("\n  上传图片："),i("input",{attrs:{type:"file"},on:{change:this.onChange}}),this._v(" "),i("canvas",{ref:"canvas"})])}),[],!1,null,"ecfa9b30",null);i.default=h.exports}}]);