(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{461:function(t,e,i){},500:function(t,e,i){"use strict";i(461)},520:function(t,e,i){"use strict";i.r(e);i(96),i(227),i(98),i(7),i(135);var n={name:"Canvas4",data:function(){return this.MAX_SIZE=4194304,this.ACCEPT=["image/png","image/jpg","image/jpeg"],this.MAXSIZE_STR="4MB",{rowNum:3,colNum:3,total:9,nineItemStyle:{width:"33.33%",height:"33.33%"},imgSrc:"",nineList:[]}},methods:{handleChange:function(t){var e=(t=t.raw).type;this.fileSize=t.size,this.ACCEPT.indexOf(e)<0?this.$message.error("不支持上传".concat(e,"类型文件")):this.fileSize>this.MAX_SIZE?this.$message.error("文件超出".concat(this.MAXSIZE_STR,"!")):this.convertImageToBase64(t)},convertImageToBase64:function(t,e){var i=new FileReader,n=this;i.addEventListener("load",(function(t){var i=t.target.result;n.base64Size=i.length,n.imgSrc=i,e&&e(i)})),i.readAsDataURL(t)},init:function(){var t=this.$refs.ImgEle.$el.querySelector("img"),e=t.naturalWidth,i=t.naturalHeight;if(this.colNum=parseInt(this.colNum),this.rowNum=parseInt(this.rowNum),this.rowNum<1||this.colNum<1||isNaN(this.colNum)||isNaN(this.rowNum))this.$message.error("行和列必大于等于1");else{var n=e/this.colNum,s=i/this.rowNum,a=document.createElement("canvas"),r=a.getContext("2d");a.width=n,a.height=s,this.total=this.rowNum*this.colNum,this.nineItemStyle={width:100/this.colNum+"%",height:100/this.rowNum+"%"},this.nineList=[];for(var l=0;l<this.total;l++)this.createImg(t,a,r,l);a=null,r=null}},createImg:function(t,e,i,n){var s=e.width,a=e.height,r=n%this.colNum,l=parseInt(n/this.colNum);i.drawImage(t,s*r,a*l,s,a,0,0,s,a);var o=e.toDataURL("image/jpeg");this.$set(this.nineList,n,o)},download:function(){0!==this.nineList.length?this.$refs.download.forEach((function(t){return t.click()})):this.$message.error("请先上传图片")},resetCreate:function(){0!==this.nineList.length?this.init():this.$message.error("请先上传图片")}}},s=(i(500),i(40)),a=Object(s.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"canvas4-view"},[i("div",{staticClass:"tool-bar"},[i("el-upload",{ref:"upload",attrs:{action:"","on-change":t.handleChange,"show-file-list":!1,"auto-upload":!1}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("\n        选取文件\n      ")])],1),t._v(" "),i("el-button",{staticClass:"download-btn",attrs:{type:"primary",size:"small"},on:{click:t.download}},[t._v("\n      下载图片\n    ")])],1),t._v(" "),i("div",{staticStyle:{"margin-top":"1rem"}},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",{attrs:{label:"行："}},[i("el-input",{staticStyle:{width:"100px"},attrs:{type:"number",min:"1",placeholder:"生成的行数"},model:{value:t.rowNum,callback:function(e){t.rowNum=t._n(e)},expression:"rowNum"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"列"}},[i("el-input",{staticStyle:{width:"100px"},attrs:{type:"number",min:"1",placeholder:"生成的列数"},model:{value:t.colNum,callback:function(e){t.colNum=t._n(e)},expression:"colNum"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.resetCreate}},[t._v("重新生成")])],1)],1)],1),t._v(" "),i("div",{staticClass:"img-display"},[i("h2",[t._v("原图预览")]),t._v(" "),i("el-image",{ref:"ImgEle",attrs:{src:t.imgSrc},on:{load:t.init}})],1),t._v(" "),i("div",{staticClass:"nine-wrapper"},[i("h2",[t._v("九宫格预览")]),t._v(" "),i("div",{ref:"nineContainer",staticClass:"nine-container"},t._l(t.total,(function(e){return i("div",{key:e-1,staticClass:"nine-item",style:[t.nineItemStyle]},[i("img",{attrs:{src:t.nineList[e-1],alt:""}})])})),0)]),t._v(" "),i("div",{staticClass:"download"},t._l(t.total,(function(e){return i("a",{key:e-1,ref:"download",refInFor:!0,attrs:{href:t.nineList[e-1],download:"图片"+e}},[t._v("\n      下载\n    ")])})),0)])}),[],!1,null,"d91d664a",null);e.default=a.exports}}]);